# src/config_loader.py

import yaml
import os

def load_paths(config_path="config/paths.yaml"):
    """
    Load file paths from a YAML configuration file.

    Parameters:
    config_path (str): Path to the YAML configuration file.

    Returns:
    dict: Dictionary containing file paths.

    Raises:
    FileNotFoundError: If the YAML file is not found.
    yaml.YAMLError: If there is an error parsing the YAML file.
    """
    try:
        with open(config_path, 'r') as file:
            paths = yaml.safe_load(file)

        project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
        paths = _update_paths(paths, project_root)

        return paths
    except FileNotFoundError as e:
        print(f"Error: {e}")
        raise
    except yaml.YAMLError as e:
        print(f"Error parsing YAML file: {e}")
        raise

def load_directories(config_path="config/directories.yaml"):
    """
    Load directory paths from a YAML configuration file.

    Parameters:
    config_path (str): Path to the YAML configuration file.

    Returns:
    dict: Dictionary containing directory paths.

    Raises:
    FileNotFoundError: If the YAML file is not found.
    yaml.YAMLError: If there is an error parsing the YAML file.
    """
    try:
        with open(config_path, 'r') as file:
            directories = yaml.safe_load(file)

        project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
        directories = _update_paths(directories, project_root)

        return directories
    except FileNotFoundError as e:
        print(f"Error: {e}")
        raise
    except yaml.YAMLError as e:
        print(f"Error parsing YAML file: {e}")
        raise

def _update_paths(config, project_root):
    """
    Update relative paths to absolute paths.

    Parameters:
    config (dict): Dictionary containing paths.
    project_root (str): The root directory of the project.

    Returns:
    dict: Dictionary with updated paths.
    """
    for category, subpaths in config.items():
        for subkey, subvalue in subpaths.items():
            if isinstance(subvalue, str):
                config[category][subkey] = os.path.abspath(os.path.join(project_root, subvalue))
    return config

def load_config(config_path="config/settings.yaml"):
    """
    Load general configuration from a YAML file.

    Parameters:
    config_path (str): Path to the YAML configuration file.

    Returns:
    dict: Dictionary containing configuration settings.

    Raises:
    FileNotFoundError: If the YAML file is not found.
    yaml.YAMLError: If there is an error parsing the YAML file.
    """
    try:
        with open(config_path, 'r') as file:
            config = yaml.safe_load(file)
        return config
    except FileNotFoundError as e:
        print(f"Error: {e}")
        raise
    except yaml.YAMLError as e:
        print(f"Error parsing YAML file: {e}")
        raise

def update_imputation_strategies(new_strategies, config_path="config/imputation.yaml"):
    """
    Update imputation strategies in the configuration file.

    Parameters:
    new_strategies (dict): Dictionary containing new imputation strategies.
    config_path (str): Path to the YAML configuration file.

    Raises:
    yaml.YAMLError: If there is an error writing to the YAML file.
    """
    try:
        with open(config_path, 'w') as file:
            yaml.safe_dump(new_strategies, file)
    except yaml.YAMLError as e:
        print(f"Error writing to YAML file: {e}")
        raise

def load_json_files(config_path="config/json_files.yaml"):
    """
    Load JSON file list from a YAML configuration file.

    Parameters:
    config_path (str): Path to the YAML configuration file.

    Returns:
    list: List of JSON files to initialize.

    Raises:
    FileNotFoundError: If the YAML file is not found.
    yaml.YAMLError: If there is an error parsing the YAML file.
    """
    try:
        with open(config_path, 'r') as file:
            config = yaml.safe_load(file)
        return config['json_files']
    except FileNotFoundError as e:
        print(f"Error: {e}")
        raise
    except yaml.YAMLError as e:
        print(f"Error parsing YAML file: {e}")
        raise




# # src/config_loader.py

# import yaml
# import os

# def load_paths(config_path="config/paths.yaml"):
#     """
#     Load file paths from a YAML configuration file.

#     Parameters:
#     config_path (str): Path to the YAML configuration file.

#     Returns:
#     dict: Dictionary containing file paths.

#     Raises:
#     FileNotFoundError: If the YAML file is not found.
#     yaml.YAMLError: If there is an error parsing the YAML file.
#     """
#     try:
#         with open(config_path, 'r') as file:
#             paths = yaml.safe_load(file)

#         project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
#         paths = _update_paths(paths, project_root)

#         return paths
#     except FileNotFoundError as e:
#         print(f"Error: {e}")
#         raise
#     except yaml.YAMLError as e:
#         print(f"Error parsing YAML file: {e}")
#         raise

# def load_directories(config_path="config/directories.yaml"):
#     """
#     Load directory paths from a YAML configuration file.

#     Parameters:
#     config_path (str): Path to the YAML configuration file.

#     Returns:
#     dict: Dictionary containing directory paths.

#     Raises:
#     FileNotFoundError: If the YAML file is not found.
#     yaml.YAMLError: If there is an error parsing the YAML file.
#     """
#     try:
#         with open(config_path, 'r') as file:
#             directories = yaml.safe_load(file)

#         project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
#         directories = _update_paths(directories, project_root)

#         return directories
#     except FileNotFoundError as e:
#         print(f"Error: {e}")
#         raise
#     except yaml.YAMLError as e:
#         print(f"Error parsing YAML file: {e}")
#         raise

# def _update_paths(config, project_root):
#     """
#     Update relative paths to absolute paths.

#     Parameters:
#     config (dict): Dictionary containing paths.
#     project_root (str): The root directory of the project.

#     Returns:
#     dict: Dictionary with updated paths.
#     """
#     for category, subpaths in config.items():
#         for subkey, subvalue in subpaths.items():
#             if isinstance(subvalue, str):
#                 config[category][subkey] = os.path.abspath(os.path.join(project_root, subvalue))
#     return config

# def load_config(config_path="config/settings.yaml"):
#     """
#     Load general configuration from a YAML file.

#     Parameters:
#     config_path (str): Path to the YAML configuration file.

#     Returns:
#     dict: Dictionary containing configuration settings.

#     Raises:
#     FileNotFoundError: If the YAML file is not found.
#     yaml.YAMLError: If there is an error parsing the YAML file.
#     """
#     try:
#         with open(config_path, 'r') as file):
#             config = yaml.safe_load(file)
#         return config
#     except FileNotFoundError as e:
#         print(f"Error: {e}")
#         raise
#     except yaml.YAMLError as e:
#         print(f"Error parsing YAML file: {e}")
#         raise

# def update_imputation_strategies(new_strategies, config_path="config/imputation.yaml"):
#     """
#     Update imputation strategies in the configuration file.

#     Parameters:
#     new_strategies (dict): Dictionary containing new imputation strategies.
#     config_path (str): Path to the YAML configuration file.

#     Raises:
#     yaml.YAMLError: If there is an error writing to the YAML file.
#     """
#     try:
#         with open(config_path, 'w') as file:
#             yaml.safe_dump(new_strategies, file)
#     except yaml.YAMLError as e:
#         print(f"Error writing to YAML file: {e}")
#         raise



# # src/config_loader.py

# import yaml
# import os

# def load_paths(config_path="config/paths.yaml"):
#     """
#     Load file paths from a YAML configuration file.

#     Parameters:
#     config_path (str): Path to the YAML configuration file.

#     Returns:
#     dict: Dictionary containing file paths.

#     Raises:
#     FileNotFoundError: If the YAML file is not found.
#     yaml.YAMLError: If there is an error parsing the YAML file.
#     """
#     try:
#         with open(config_path, 'r') as file:
#             paths = yaml.safe_load(file)

#         project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
#         paths = _update_paths(paths, project_root)

#         return paths
#     except FileNotFoundError as e:
#         print(f"Error: {e}")
#         raise
#     except yaml.YAMLError as e:
#         print(f"Error parsing YAML file: {e}")
#         raise

# def load_directories(config_path="config/directories.yaml"):
#     """
#     Load directory paths from a YAML configuration file.

#     Parameters:
#     config_path (str): Path to the YAML configuration file.

#     Returns:
#     dict: Dictionary containing directory paths.

#     Raises:
#     FileNotFoundError: If the YAML file is not found.
#     yaml.YAMLError: If there is an error parsing the YAML file.
#     """
#     try:
#         with open(config_path, 'r') as file:
#             directories = yaml.safe_load(file)

#         project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
#         directories = _update_paths(directories, project_root)

#         return directories
#     except FileNotFoundError as e:
#         print(f"Error: {e}")
#         raise
#     except yaml.YAMLError as e:
#         print(f"Error parsing YAML file: {e}")
#         raise

# def _update_paths(config, project_root):
#     """
#     Update relative paths to absolute paths.

#     Parameters:
#     config (dict): Dictionary containing paths.
#     project_root (str): The root directory of the project.

#     Returns:
#     dict: Dictionary with updated paths.
#     """
#     for category, subpaths in config.items():
#         for subkey, subvalue in subpaths.items():
#             if isinstance(subvalue, str):
#                 config[category][subkey] = os.path.abspath(os.path.join(project_root, subvalue))
#     return config

# def load_config(config_path="config/settings.yaml"):
#     """
#     Load general configuration from a YAML file.

#     Parameters:
#     config_path (str): Path to the YAML configuration file.

#     Returns:
#     dict: Dictionary containing configuration settings.

#     Raises:
#     FileNotFoundError: If the YAML file is not found.
#     yaml.YAMLError: If there is an error parsing the YAML file.
#     """
#     try:
#         with open(config_path, 'r') as file:
#             config = yaml.safe_load(file)
#         return config
#     except FileNotFoundError as e:
#         print(f"Error: {e}")
#         raise
#     except yaml.YAMLError as e:
#         print(f"Error parsing YAML file: {e}")
#         raise

# def update_imputation_strategies(new_strategies, config_path="config/imputation.yaml"):
#     """
#     Update imputation strategies in the configuration file.

#     Parameters:
#     new_strategies (dict): Dictionary containing new imputation strategies.
#     config_path (str): Path to the YAML configuration file.

#     Raises:
#     yaml.YAMLError: If there is an error writing to the YAML file.
#     """
#     try:
#         with open(config_path, 'w') as file:
#             yaml.safe_dump(new_strategies, file)
#     except yaml.YAMLError as e:
#         print(f"Error writing to YAML file: {e}")
#         raise




# # # src/config_loader.py

# # import yaml
# # import os

# # def load_paths(config_path="config/paths.yaml"):
# #     """
# #     Load file paths from a YAML configuration file.

# #     Parameters:
# #     config_path (str): Path to the YAML configuration file.

# #     Returns:
# #     dict: Dictionary containing file paths.

# #     Raises:
# #     FileNotFoundError: If the YAML file is not found.
# #     yaml.YAMLError: If there is an error parsing the YAML file.
# #     """
# #     try:
# #         with open(config_path, 'r') as file:
# #             paths = yaml.safe_load(file)

# #         project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
# #         paths = _update_paths(paths, project_root)

# #         return paths
# #     except FileNotFoundError as e:
# #         print(f"Error: {e}")
# #         raise
# #     except yaml.YAMLError as e:
# #         print(f"Error parsing YAML file: {e}")
# #         raise

# # def _update_paths(paths, project_root):
# #     """
# #     Update relative paths to absolute paths.

# #     Parameters:
# #     paths (dict): Dictionary containing file paths.
# #     project_root (str): The root directory of the project.

# #     Returns:
# #     dict: Dictionary with updated file paths.
# #     """
# #     for key, value in paths.items():
# #         for subkey, subvalue in value.items():
# #             if isinstance(subvalue, str) and subvalue.startswith(".."):
# #                 paths[key][subkey] = os.path.abspath(os.path.join(project_root, subvalue))
# #     return paths

# # def load_config(config_path):
# #     """
# #     Load configuration from a YAML file.

# #     Parameters:
# #     config_path (str): Path to the YAML configuration file.

# #     Returns:
# #     dict: Dictionary containing configuration settings.

# #     Raises:
# #     FileNotFoundError: If the YAML file is not found.
# #     yaml.YAMLError: If there is an error parsing the YAML file.
# #     """
# #     try:
# #         with open(config_path, 'r') as file:
# #             config = yaml.safe_load(file)
# #         return config
# #     except FileNotFoundError as e:
# #         print(f"Error: {e}")
# #         raise
# #     except yaml.YAMLError as e:
# #         print(f"Error parsing YAML file: {e}")
# #         raise

# # def update_imputation_strategies(new_strategies, config_path):
# #     """
# #     Update imputation strategies in the configuration file.

# #     Parameters:
# #     new_strategies (dict): Dictionary containing new imputation strategies.
# #     config_path (str): Path to the YAML configuration file.

# #     Raises:
# #     yaml.YAMLError: If there is an error writing to the YAML file.
# #     """
# #     try:
# #         with open(config_path, 'w') as file:
# #             yaml.safe_dump(new_strategies, file)
# #     except yaml.YAMLError as e:
# #         print(f"Error writing to YAML file: {e}")
# #         raise




# # # import yaml
# # # import os

# # # def load_paths():
# # #     with open("config/paths.yaml", 'r') as file:
# # #         paths = yaml.safe_load(file)
    
# # #     project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
# # #     for key, value in paths.items():
# # #         for subkey, subvalue in value.items():
# # #             if isinstance(subvalue, str) and subvalue.startswith(".."):
# # #                 paths[key][subkey] = os.path.abspath(os.path.join(project_root, subvalue))
    
# # #     return paths

# # # def load_config(config_path):
# # #     with open(config_path, 'r') as file:
# # #         config = yaml.safe_load(file)
# # #     return config

# # # def update_imputation_strategies(new_strategies, config_path):
# # #     with open(config_path, 'w') as file:
# # #         yaml.safe_dump(new_strategies, file)



# # # # # src/config_loader.py

# # # # import yaml
# # # # import os

# # # # def load_paths():
# # # #     with open("config/paths.yaml", 'r') as file:
# # # #         paths = yaml.safe_load(file)
    
# # # #     project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
# # # #     for key, value in paths.items():
# # # #         for subkey, subvalue in value.items():
# # # #             if isinstance(subvalue, str) and subvalue.startswith(".."):
# # # #                 paths[key][subkey] = os.path.abspath(os.path.join(project_root, subvalue))
    
# # # #     return paths

# # # # def load_config(config_path):
# # # #     with open(config_path, 'r') as file:
# # # #         config = yaml.safe_load(file)
# # # #     return config

# # # # def update_imputation_strategies(new_strategies, config_path):
# # # #     with open(config_path, 'w') as file:
# # # #         yaml.safe_dump(new_strategies, file)

# # # # def load_paths():
# # # #     with open('config/paths.yaml', 'r') as file:
# # # #         return yaml.safe_load(file)

# # # # # Example usage:
# # # # if __name__ == "__main__":
# # # #     paths = load_paths()
# # # #     print(paths)
