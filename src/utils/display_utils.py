# src/utils/display_utils.py

import pandas as pd
from IPython.display import display, HTML

def display_dataframe_as_html(df):
    display(HTML(df.to_html(index=False)))

def print_comparison_summary(comparison_table):
    """
    Print summary of feature classification discrepancies.

    Parameters:
    comparison_table (pd.DataFrame): The comparison table.
    """
    try:
        total_features = comparison_table.shape[0]
        discrepancies = comparison_table[comparison_table['Discrepancy'] == True]
        total_discrepancies = discrepancies.shape[0]
        total_non_discrepancies = total_features - total_discrepancies

        print("\n--- Summary of Feature Classification Discrepancies ---\n")
        print(f"Total Features: {total_features}")
        print(f"Features with Discrepancies: {total_discrepancies} ({(total_discrepancies/total_features)*100:.2f}%)")
        print(f"Features without Discrepancies: {total_non_discrepancies} ({(total_non_discrepancies/total_features)*100:.2f}%)")

        print("\n--- Comparison Table ---\n")
        print(comparison_table.to_string(index=False))

        print("\nDescription:")
        print("Previously Analyzed Type: This classification type came from # notebooks/01_data_understanding/01a_initial_data_understanding.ipynb and was updated using # notebooks/01_data_understanding/01b_initial_data_understanding_update_metadata.ipynb to update the classified_data_type attribute in # config/feature_metadata.yaml.")
    except Exception as e:
        print(f"Error printing comparison summary: {e}")
        raise
