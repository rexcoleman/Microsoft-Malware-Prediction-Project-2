# src/utils.py

import pandas as pd
import yaml
import os

def save_analysis_results(train_summary_stats, test_summary_stats, imputation_strategies, report_dir):
    """
    Save the analysis results to files.

    Parameters:
    - train_summary_stats (DataFrame): Summary statistics for the training data.
    - test_summary_stats (DataFrame): Summary statistics for the test data.
    - imputation_strategies (dict): Suggested imputation strategies.
    - report_dir (str): Directory to save the report files.
    """
    train_summary_stats.to_csv(f'{report_dir}/train_summary_statistics.csv')
    test_summary_stats.to_csv(f'{report_dir}/test_summary_statistics.csv')

    with open(f'{report_dir}/imputation_strategies.yaml', 'w') as file:
        yaml.dump(imputation_strategies, file)

import os

def ensure_directories_exist(config):
    report_dir = config['report_dir']
    sub_dirs = [
        'figures/00_initial_analysis',
        'figures/01_data_exploration/univariate_analysis_plots',
        'figures/01_data_exploration/bivariate_analysis_plots',
        'figures/01_data_exploration/multivariate_analysis_plots',
        'figures/01_data_exploration/time_series_plots',
        'figures/02_data_cleaning',
        'tables/00_initial_analysis',
        'tables/01_data_exploration/univariate_analysis_tables',
        'tables/01_data_exploration/bivariate_analysis_tables',
        'tables/01_data_exploration/multivariate_analysis_tables',
        'tables/01_data_exploration/time_series_tables',
        'tables/02_data_cleaning',
        'configs',
        'logs'
    ]
    
    for sub_dir in sub_dirs:
        directory = os.path.join(report_dir, sub_dir)
        if not os.path.exists(directory):
            os.makedirs(directory)


